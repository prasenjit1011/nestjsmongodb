<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NodeJS</title>
<script src="cdn/jquery-3.6.0.min.js"></script>
<script src="cdn/js.cookie.min.js"></script>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<div>
<a href="/doctor/index.html">Nodejs</a> &nbsp; 
<a href="/doctor/react.html">React</a> &nbsp; 
<a href="/doctor/docker.html">Docker</a> &nbsp; 
<a href="/doctor/cmd.html">CMD</a> &nbsp; 
<a href="/doctor/kafka.html">Kafka</a> &nbsp; 
<a href="kafka-interview.html">Kafka Interview</a> &nbsp; 
<a href="mongodb.html">Mongo DB</a> &nbsp; 
<a href="DynamoDB.html">Dynamo DB</a> &nbsp; 
<a href="code.html">Promise</a> &nbsp; 
<a href="code.html">Code</a> &nbsp; 
<a href="crud.html">Crud</a> &nbsp; 
<a href="skill.html">Skill</a> &nbsp; 
<a href="laravel.html">Laravel</a> &nbsp; 
<a href="https://onecompiler.com/nodejs/43hqq7r87" target="_blank">Coding</a> &nbsp; 
<a href="#" id="addCss">Add CSS</a> &nbsp;
<a href="#" id="removeCss">Remove CSS</a>

</div>

<ul class="faq">




  <ol>
    <li>
      <strong>Install Dependencies:</strong><br>
      npm install @reduxjs/toolkit react-redux axios js-cookie
    </li>
  
    <li>
      <strong>Setup Redux Store:</strong><br>
      File: <em>src/app/store.js</em>
      <pre>
  import { configureStore } from '@reduxjs/toolkit'
  import authReducer from '../features/auth/authSlice'
  
  const store = configureStore({
    reducer: {
      auth: authReducer
    }
  })
  
  export default store
      </pre>
    </li>
  
    <li>
      <strong>Setup Auth Slice with localStorage + Cookies:</strong><br>
      File: <em>src/features/auth/authSlice.js</em>
      <pre>
  import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'
  import axios from 'axios'
  import Cookies from 'js-cookie'
  
  const token = localStorage.getItem('token')
  
  const initialState = {
    user: token ? JSON.parse(localStorage.getItem('user')) : null,
    token: token || null,
    loading: false,
    error: null
  }
  
  export const loginUser = createAsyncThunk('auth/loginUser', async (credentials) => {
    const response = await axios.post('https://yourapi.com/login', credentials)
    const { token, user } = response.data
  
    // Store token in localStorage and cookies
    localStorage.setItem('token', token)
    localStorage.setItem('user', JSON.stringify(user))
    Cookies.set('token', token)
  
    return { user, token }
  })
  
  export const logoutUser = createAsyncThunk('auth/logoutUser', async () => {
    await axios.post('https://yourapi.com/logout')
  
    localStorage.removeItem('token')
    localStorage.removeItem('user')
    Cookies.remove('token')
  
    return true
  })
  
  const authSlice = createSlice({
    name: 'auth',
    initialState,
    reducers: {},
    extraReducers: (builder) => {
      builder
        .addCase(loginUser.pending, (state) => {
          state.loading = true
          state.error = null
        })
        .addCase(loginUser.fulfilled, (state, action) => {
          state.loading = false
          state.user = action.payload.user
          state.token = action.payload.token
        })
        .addCase(loginUser.rejected, (state, action) => {
          state.loading = false
          state.error = action.error.message
        })
        .addCase(logoutUser.fulfilled, (state) => {
          state.user = null
          state.token = null
        })
    }
  })
  
  export default authSlice.reducer
      </pre>
    </li>
  
    <li>
      <strong>Wrap App with Provider:</strong><br>
      File: <em>src/index.js</em>
      <pre>
  import React from 'react'
  import ReactDOM from 'react-dom'
  import App from './App'
  import { Provider } from 'react-redux'
  import store from './app/store'
  
  ReactDOM.render(
    <Provider store={store}>
      <App />
    </Provider>,
    document.getElementById('root')
  )
      </pre>
    </li>
  
    <li>
      <strong>Create Login Component:</strong><br>
      File: <em>src/components/Login.js</em>
      <pre>
  import React, { useState } from 'react'
  import { useDispatch, useSelector } from 'react-redux'
  import { loginUser, logoutUser } from '../features/auth/authSlice'
  
  function Login() {
    const [email, setEmail] = useState('')
    const [password, setPassword] = useState('')
    const dispatch = useDispatch()
    const { user, loading, error } = useSelector(state => state.auth)
  
    const handleLogin = () => {
      dispatch(loginUser({ email, password }))
    }
  
    const handleLogout = () => {
      dispatch(logoutUser())
    }
  
    return (
      &lt;div&gt;
        &lt;h2&gt;Login&lt;/h2&gt;
        &lt;input type="text" value={email} onChange={(e) => setEmail(e.target.value)} placeholder="Email" /&gt;
        &lt;input type="password" value={password} onChange={(e) => setPassword(e.target.value)} placeholder="Password" /&gt;
        &lt;button onClick={handleLogin}&gt;Login&lt;/button&gt;
        &lt;button onClick={handleLogout}&gt;Logout&lt;/button&gt;
  
        {loading && &lt;p&gt;Loading...&lt;/p&gt;}
        {error && &lt;p style={{ color: 'red' }}&gt;{error}&lt;/p&gt;}
        {user && &lt;p&gt;Welcome {user.name}&lt;/p&gt;}
      &lt;/div&gt;
    )
  }
  
  export default Login
      </pre>
    </li>
  
    <li>
      <strong>Optional: Auto-login from localStorage on App Load</strong><br>
      Use useEffect to auto-load token and user from storage in App.js or Layout component.
    </li>
  </ol>
  



</ul>
<script src="script.js"></script>

</body>
</html>
